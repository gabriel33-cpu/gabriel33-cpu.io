<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>RPP Agency - Pagar Servicio</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body { font-family:'Montserrat', sans-serif; background:#f5f5f7; margin:0; display:flex; justify-content:center; align-items:center; height:100vh; }
.container { background:#fff; border-radius:12px; padding:2.5rem 3rem; box-shadow:0 15px 40px rgba(0,0,0,0.1); max-width:450px; width:90%; text-align:center; }
h1 { color:#1a1a1a; font-size:2rem; margin-bottom:1rem; }
p { font-size:1.1rem; margin-bottom:2rem; color:#333; }
button { background-color:#1a1a1a; color:#fff; border:none; border-radius:10px; padding:1rem 2rem; font-weight:600; cursor:pointer; font-size:1rem; transition:0.3s; }
button:hover { background-color:#b8860b; }
</style>
</head>
<body>

<div class="container">
  <h1>Confirma tu servicio</h1>
  <p id="servicio-info">Cargando...</p>
  <button id="checkout-button">Pagar con tarjeta</button>
</div>

<script src="https://js.stripe.com/v3/"></script>
<script>
const params = new URLSearchParams(window.location.search);
const nombre = params.get('nombre');
const precio = params.get('precio');

if(nombre && precio){
  document.getElementById('servicio-info').textContent = `${nombre} - ${precio} €`;
} else {
  document.getElementById('servicio-info').textContent = 'No se pudo cargar el servicio.';
}

// Tu clave pública de Stripe
const stripe = Stripe('pk_test_51SBLtI0gX3Yktc5tvvSwyIq3TfHynuTPTeQsnQ1fI4TvQaCD3YSD1ZTeTOouS8PIfqsHAyszVbGmDuyMDJoA00fA7sEof8');

document.getElementById('checkout-button').addEventListener('click', async () => {
  if(!nombre || !precio) return;

  try {
    const response = await fetch('https://tuservidor.com/create-checkout-session', {
      method:'POST',
      headers:{ 'Content-Type':'application/json' },
      body: JSON.stringify({ nombre, precio: parseFloat(precio) })
    });
    const session = await response.json();
    if(session.id){
      stripe.redirectToCheckout({ sessionId: session.id });
    } else {
      alert('Error al crear la sesión de pago.');
    }
  } catch(e){
    console.error(e);
    alert('Error al conectar con el servidor.');
  }
});
</script>

</body>
</html>
